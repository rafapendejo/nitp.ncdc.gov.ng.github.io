(function($){Drupal.behaviors.nitp={attach:function(context,settings){let baseurl=Drupal.settings.covid_form.base_url+'/';let q1=document.getElementById("edit-field-are-you-returning-to-niger-und-1");if(q1){q1.addEventListener('click',function(event){$('#modal-default').modal('show');});}
$('#edit-field-what-country-are-you-trave-und-205, #edit-field-what-country-are-you-trave-und-206, #edit-field-what-country-are-you-trave-und-207').each(function(){$(this).on('click',function(){$('#modal-country').modal('show');})})
$(".group-one .multipage-link-next").on('click',function(){let email=$("#edit-field-email-und-0-email").val()
window.covid_form_email=email;if(email){$.ajax({url:baseurl+"cvdform/save-toses",type:"post",data:{"email":email}})}})
$('.form-item-field-hotel-isolation-center-und').on('click',function(){$('#modal-hotel').modal('show');})
$('#sendvc',context).once().on('click',function(event){let phone=$("#edit-field-phone-number-und-0-value").val();if(phone&&phone.length==11){let email=$("#edit-field-email-und-0-email").val();$.ajax({url:baseurl+"cvdform/send-sms",type:"post",data:{"phone":phone,"email":email},success:function(response){},error:function(jqXHR,textStatus,errorThrown){console.log(textStatus,errorThrown);}});let msg="Kindly enter the OTP sent to "+phone+" and "+email;alert(msg);}else{alert('Invalid Phone Number. Phone number must have 11 characters without country code.')}});$("#confirm-passport-verify").on("submit",function(e){e.preventDefault();let nid=$("#nid").val();$.ajax({url:baseurl+"confirm-passport-verify",type:"post",data:$("#confirm-passport-verify").serialize(),success:function(response){$("#error").html("");let url=`https://nitp.ncdc.gov.ng/pdf/nitp/_paymentconfirmed/?nid=${nid}`;let a=document.createElement('a');a.style.display='none';a.href=url;a.download='';document.body.appendChild(a);a.click();},error:function(error){$("#error").html(`<div class='alert alert-danger' role="alert">${error.responseJSON.message}</div>`);setTimeout(()=>{$("#error").html("")},4000);}});});}}}(jQuery));